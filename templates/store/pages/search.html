{% extends 'layout.html' %}
{% import 'macros/utils.jinja' as util %}

{% set search_query = q | default(page.query | default('', true), true) %}

{% block title %}Search "{{ search_query }}" â€” {{ site.title }}{% endblock %}

{% block content %}
  <section class="section">
    <header class="section-header">
      <h1>{{ page.heading }}</h1>
      <p>{{ page.description }}</p>
      <form class="search-form" action="{{ util.tenant_href('search') }}" method="get">
        <label class="sr-only" for="search-query">Search products</label>
        <input
          id="search-query"
          type="search"
          name="q"
          value="{{ search_query }}"
          placeholder="Search by product or tag"
        />
        <button class="btn btn-primary" type="submit">Search</button>
      </form>
    </header>

    <div id="search-summary" class="search-summary"></div>
    <p id="search-empty" class="search-empty" hidden>
      Enter a search term to find products in our catalog.
    </p>
    <div id="search-results" class="product-grid"></div>
  </section>
  <script
    type="module"
    src="/static/catalog-search-app.js"
    data-module="catalog-search"
    data-view="search"
    data-site-slug="{{ site.slug }}"
    data-results-target="#search-results"
    data-summary-target="#search-summary"
    data-empty-target="#search-empty"
    data-form-selector=".search-form"
    data-input-selector="#search-query"
  ></script>
{% endblock %}
